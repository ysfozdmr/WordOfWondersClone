(()=>{var t,i={4575:(t,i,e)=>{"use strict";e.d(i,{eI:()=>m,uc:()=>w});var s=e(2512);const n=JSON.parse('{"bundles":[{"name":"game","assets":[{"name":"logo","srcs":"assets/core/logo_white.png"},{"name":"background","srcs":"assets/bg.png"},{"name":"rect","srcs":"assets/rect.png"},{"name":"circle","srcs":"assets/circle.png"},{"name":"shuffle","srcs":"assets/shuffle.png"},{"name":"playNow","srcs":"assets/install0.png"},{"name":"orangePanel","srcs":"assets/orangePanel.png"},{"name":"greenPanel","srcs":"assets/greenPanel.png"},{"name":"hand","srcs":"assets/hand.png"}]},{"name":"fonts","assets":[{"name":"font","srcs":"assets//Sniglet-Regular.ttf"}]}]}'),a={extension:s.ExtensionType.ResolveParser,test:t=>s.settings.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:s.resolveTextureUrl.parse};s.extensions.add(a);var o=e(6358),h=e(4607),l=e(2067);class r{constructor(t){this.game=t,this.container=new s.Container,this.cells=new Map,this.wordToSlot=new Map,this.cellSize=72,this.gap=14,this.gridStartY=40,this.gridRows=3}build(t){const i=[[0,0],[1,0],[2,0],[3,0],[0,1],[2,1],[0,2],[1,2],[2,2]],e=[...t],n=e.find(t=>4===t.length)||e.reduce((t,i)=>i.length>t.length?i:t,e[0]),a=e.filter(t=>t!==n),o=a.find(t=>t[0]===n[0])||a[0],h=a.filter(t=>t!==o),l=h.find(t=>t[0]===n[2])||h[0],r=h.filter(t=>t!==l)[0];this.wordToSlot.set(n,"TOP"),this.wordToSlot.set(o,"LEFT"),this.wordToSlot.set(l,"MID"),this.wordToSlot.set(r,"BOTTOM");const d=4*this.cellSize+3*this.gap,u=(w-d)/2-30;for(const[t,e]of i){const i=`${t},${e}`,n=new s.Sprite(s.Texture.from("assets/rect.png"));n.width=this.cellSize,n.height=this.cellSize,n.x=u+t*(this.cellSize+this.gap)+this.cellSize/2,n.y=this.gridStartY+e*(this.cellSize+this.gap)+this.cellSize/2;const a=new s.Text("",{fill:3355443,fontSize:55,fontWeight:"bold"});a.anchor.set(.5),n.addChild(a);const o=n.getLocalBounds();a.position.set(o.x+o.width/2,o.y+o.height/2),a.scale.set(2.5),this.container.addChild(n),this.cells.set(i,{gfx:n,txt:a,slotChars:new Map})}this.bindSlot({id:"TOP",x:0,y:0,dir:"H",len:4},n),this.bindSlot({id:"LEFT",x:0,y:0,dir:"V",len:3},o),this.bindSlot({id:"MID",x:2,y:0,dir:"V",len:3},l),this.bindSlot({id:"BOTTOM",x:0,y:2,dir:"H",len:3},r)}bindSlot(t,i){if(t&&i)for(let e=0;e<t.len;e++){const s=t.x+("H"===t.dir?e:0),n=t.y+("V"===t.dir?e:0),a=this.cells.get(`${s},${n}`);a&&a.slotChars.set(t.id,i[e])}}revealWord(t,i,e){const n=this.wordToSlot.get(t);if(!n)return;const a=i.x,h=i.y,l=[];for(const t of this.cells.values()){const i=t.slotChars.get(n);i&&l.push({cell:t,ch:i})}l.forEach((t,i)=>{const n=new s.Text(t.ch,{fill:16777215,fontSize:32,fontWeight:"bold"});n.anchor.set(.5),n.x=a,n.y=h,e.addChild(n);const l=t.cell.gfx.getGlobalPosition(),r=l.x+t.cell.gfx.width/2,d=l.y+t.cell.gfx.height/2;o.ZP.to(n,{x:r,y:d,duration:.55,delay:.08*i,ease:"power2.inOut",onUpdate:function(){this.progress()>.65&&!t.cell._highlighted&&(t.cell._highlighted=!0,t.cell.gfx.tint=16752410)},onComplete:()=>{t.cell.txt.text=t.ch,t.cell.txt.style.fill=16777215,e.removeChild(n),n.destroy()}})})}getBottomY(){return this.gridStartY+this.gridRows*(this.cellSize+this.gap)}}class d{constructor(t,i){this.game=t,this.container=new s.Container,this.letters=i.split(","),this.buttons=[],this.shuffleBtn=null,this.trayCenter={x:w/2,y:m-220},this.trayRadius=70}build(){const{x:t,y:i}=this.trayCenter,e=(new s.Graphics).beginFill(16777215).drawCircle(0,0,120).endFill();e.alpha=.7,e.position.set(t,i),this.container.addChild(e);const n=new s.Sprite(s.Texture.from("assets/shuffle.png"));n.anchor.set(.5),n.width=48,n.height=48,n.eventMode="static",n.cursor="pointer",n.on("pointerdown",()=>this.shuffle()),this.shuffleBtn=n,this.container.addChild(n),this.layoutButtons()}layoutButtons(){for(const t of this.buttons)this.container.removeChild(t);this.buttons=[];const{x:t,y:i}=this.trayCenter,e=this.trayRadius;this.letters.forEach((n,a)=>{const o=2*Math.PI/this.letters.length*a-Math.PI/2,h=new s.Container;h.x=t+Math.cos(o)*e,h.y=i+Math.sin(o)*e,h.eventMode="static",h.cursor="pointer",h.letter=n;const l=new s.Sprite(s.Texture.from("assets/circle.png"));l.anchor.set(.5),l.width=70,l.height=70,l.visible=!1,h.addChild(l),h.circle=l;const r=new s.Text(n,{fill:16752410,fontSize:46,fontWeight:"bold"});r.anchor.set(.5),h.addChild(r),h.txt=r,h.isActive=!1,h.on("pointerdown",()=>this.game.startSwipe(h)),this.buttons.push(h),this.container.addChild(h)}),this.shuffleBtn&&(this.shuffleBtn.x=this.trayCenter.x,this.shuffleBtn.y=this.trayCenter.y)}shuffle(){if(this.game.isSwiping||this.game.isAutoplaying)return;this.game.tutorial.hide(),this.game.tutorial.cancelAutoplay();const{x:t,y:i}=this.trayCenter,e=this.trayRadius;this.buttons.forEach((e,s)=>{o.ZP.to(e,{x:t,y:i,duration:.25,ease:"power2.inOut",delay:.02*s})});const s=[...this.buttons];for(let t=s.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[s[t],s[i]]=[s[i],s[t]]}const n=this.buttons.map((s,n)=>{const a=2*Math.PI/this.buttons.length*n-Math.PI/2;return{x:t+Math.cos(a)*e,y:i+Math.sin(a)*e}});o.ZP.delayedCall(.28,()=>{s.forEach((t,i)=>{o.ZP.to(t,{x:n[i].x,y:n[i].y,duration:.45,ease:"power3.out",delay:.03*i})}),this.buttons=s;const t=.45+.03*(this.buttons.length-1);o.ZP.delayedCall(t+.05,()=>this.game.tutorial.schedule())})}getButtonsForWord(t){const i=new Set,e=[];for(const s of t){const t=this.buttons.find(t=>t.letter===s&&!i.has(t));if(!t)return null;i.add(t),e.push(t)}return e}resetButtons(t){t.forEach(t=>{o.ZP.to(t.scale,{x:1,y:1,duration:.08}),t.isActive=!1,t.circle.visible=!1,t.txt.style.fill=16752410})}}class u{constructor(t){this.game=t,this.line=new s.Graphics,this.isSwiping=!1,this.activeWord="",this.activeButtons=[]}start(t,i=!1){this.game.isGameOver||this.game.isAutoplaying&&!i||(i||(this.game.tutorial.hide(),this.game.tutorial.cancelAutoplay()),this.reset(),this.isSwiping=!0,this.addButton(t))}onMove(t){if(!this.isSwiping)return;const i=t.global;for(const t of this.game.tray.buttons){if(this.activeButtons.includes(t))continue;const e=i.x-t.x,s=i.y-t.y;if(Math.sqrt(e*e+s*s)<36){this.addButton(t);break}}this.drawLine(i)}addButton(t){t.isActive||(t.isActive=!0,this.activeButtons.push(t),this.activeWord+=t.letter,t.circle.visible=!0,t.circle.tint=16752410,t.txt.style.fill=16777215,this.game.wordPreview.update(this.activeWord))}drawLine(t){if((this.isSwiping||this.game.isAutoplaying)&&0!==this.activeButtons.length){if(this.line.clear(),this.line.lineStyle({width:10,color:16752410,cap:"round",join:"round"}),this.activeButtons.length>0){this.line.moveTo(this.activeButtons[0].x,this.activeButtons[0].y);for(let t=1;t<this.activeButtons.length;t++)this.line.lineTo(this.activeButtons[t].x,this.activeButtons[t].y)}t&&this.line.lineTo(t.x,t.y)}}onUp(){if(!this.isSwiping&&!this.game.isAutoplaying)return;this.isSwiping=!1;const t=this.activeWord;this.game.validWords.has(t)&&!this.game.found.has(t)?(this.game.found.add(t),this.game.grid.revealWord(t,this.game.wordPreview.container,this.game),this.game.wordPreview.hide(),this.game.found.size===this.game.validWords.size&&this.game.endGame()):this.game.wordPreview.fail(),this.reset(),this.game.tutorial.schedule()}reset(){this.game.tray.resetButtons(this.activeButtons),this.activeButtons=[],this.activeWord="",this.line.clear()}}class c{constructor(t,i){this.container=new s.Container,this.container.visible=!1,this.trayCenter=t,this.trayRadius=i;const e=(new s.Graphics).beginFill(16752410).drawRoundedRect(-40,-22,80,44,12).endFill(),n=new s.Text("",{fill:16777215,fontSize:24,fontWeight:"bold"});n.anchor.set(.5),this.container.addChild(e,n),this.bg=e,this.txt=n}update(t){this.container.visible=!0,this.container.alpha=1,this.txt.text=t;const i=this.txt.width+40;this.bg.clear().beginFill(16752410).drawRoundedRect(-i/2,-22,i,44,12).endFill(),this.container.x=this.trayCenter.x,this.container.y=this.trayCenter.y-this.trayRadius-80}hide(){o.ZP.to(this.container,{alpha:0,duration:.15,onComplete:()=>{this.container.visible=!1}})}fail(){const t=this.container;o.ZP.fromTo(t,{x:t.x-6},{x:t.x+6,duration:.06,yoyo:!0,repeat:4,onComplete:()=>this.hide()})}get x(){return this.container.x}get y(){return this.container.y}}class g{constructor(t){this.game=t,this.hand=null,this.hintPanel=null,this.handTL=null,this.tutorialTimeout=null,this.autoplayTimeout=null,this.autoplayTL=null,this.tutorialLoopCount=0,this.autoplayAfterLoops=2,this.autoplayStepDuration=1.2}buildHand(){return this.hand=new s.Sprite(s.Texture.from("assets/hand.png")),this.hand.anchor.set(.2,.1),this.hand.scale.set(.4),this.hand.visible=!1,this.hand}buildHintPanel(t){this.hintPanel=new s.Container;const i=new s.Sprite(s.Texture.from("assets/greenPanel.png"));i.anchor.set(.5),i.width=260,i.height=40;const e=new s.Text("",{fill:16777215,fontSize:22,fontWeight:"bold",fontFamily:"Sniglet"});return e.anchor.set(.5),this.hintPanel.addChild(i,e),this.hintPanel.bg=i,this.hintPanel.txt=e,this.hintPanel.x=w/2,this.hintPanel.y=t+60,this.hintPanel.visible=!1,this.hintPanel}schedule(){clearTimeout(this.tutorialTimeout),this.game.isGameOver||this.game.isAutoplaying||(this.tutorialTimeout=setTimeout(()=>{this.show()},7e3))}hide(){clearTimeout(this.tutorialTimeout),this.hintPanel&&(this.hintPanel.visible=!1),this.handTL&&(this.handTL.kill(),this.handTL=null),this.hand&&(o.ZP.killTweensOf(this.hand),o.ZP.to(this.hand,{alpha:0,duration:.2,ease:"sine.in",onComplete:()=>{this.hand.visible=!1}}))}show(){if(this.game.isGameOver||this.game.isAutoplaying)return;const t=this.getTutorialWord();if(!t)return;const i=this.game.tray.getButtonsForWord(t);if(!i||0===i.length)return;this.updateHint(t),this.hintPanel&&(this.hintPanel.visible=!0),this.handTL&&(this.handTL.kill(),this.handTL=null),this.tutorialLoopCount=0;const e=t=>{const i=t.getGlobalPosition(),e=this.game.toLocal(i);return{x:e.x,y:e.y-10}},s=e(i[0]);this.hand.visible=!0,this.hand.alpha=0,this.hand.position.set(s.x,s.y),o.ZP.to(this.hand,{alpha:1,duration:.18,ease:"sine.out"}),this.handTL=o.ZP.timeline({repeat:-1,repeatDelay:.7,onRepeat:()=>{this.tutorialLoopCount++,this.tutorialLoopCount>=this.autoplayAfterLoops&&!this.game.isAutoplaying&&(this.handTL&&(this.handTL.kill(),this.handTL=null),this.startAutoplay())}}),i.forEach((t,i)=>{this.handTL.to(this.hand,{x:()=>e(t).x,y:()=>e(t).y,duration:.7,ease:"power1.inOut"},0===i?0:"+=0.04")})}updateHint(t){this.hintPanel&&(this.hintPanel.txt.text=`Connect the letters ${t}`)}getTutorialWord(){return this.game.words.find(t=>!this.game.found.has(t))}cancelAutoplay(){clearTimeout(this.autoplayTimeout),this.game.isAutoplaying=!1,this.autoplayTL&&(this.autoplayTL.kill(),this.autoplayTL=null)}startAutoplay(){if(this.game.isGameOver||this.game.isAutoplaying)return;const t=this.getTutorialWord();if(!t)return;const i=this.game.tray.getButtonsForWord(t);if(!i||0===i.length)return;this.game.isAutoplaying=!0,this.handTL&&(this.handTL.kill(),this.handTL=null),this.game.swipe.reset(),this.game.swipe.isSwiping=!0;const e=t=>{const i=t.getGlobalPosition();return this.game.toLocal(i)},s=e(i[0]);this.hand.visible=!0,this.hand.alpha=1,this.hand.position.set(s.x,s.y-10),this.game.swipe.drawLine({x:this.hand.x,y:this.hand.y}),this.game.swipe.addButton(i[0]),this.autoplayTL&&this.autoplayTL.kill(),this.autoplayTL=o.ZP.timeline();for(let t=1;t<i.length;t++){const s=i[t],n=e(s);this.autoplayTL.to(this.hand,{x:n.x,y:n.y-10,duration:this.autoplayStepDuration,ease:"power1.inOut",onUpdate:()=>{this.game.swipe.drawLine({x:this.hand.x,y:this.hand.y})},onComplete:()=>{this.game.swipe.addButton(s)}})}this.autoplayTL.call(()=>{this.finishAutoplay()})}finishAutoplay(){this.autoplayTL&&(this.autoplayTL.kill(),this.autoplayTL=null),this.game.swipe.isSwiping=!0,o.ZP.delayedCall(.18,()=>{this.game.swipe.onUp(),this.game.isAutoplaying=!1,this.hide(),this.schedule()})}}class p{constructor(){this.playNowButton=null,this.background=null}async loadBackground(){const t=await s.Assets.load("assets/bg.png"),i=new s.Sprite(t);return i.width=w,i.height=m,i.x=0,i.y=0,this.background=i,i}createPlayNowButton(){const t=new s.Container,i=new s.Sprite(s.Texture.from("assets/install0.png"));i.anchor.set(.5),i.width=220,i.height=64;const e=new s.Text("PLAY NOW!",{fill:16777215,fontSize:28,fontWeight:"bold"});return e.anchor.set(.5),t.addChild(i,e),t.x=w/2,t.y=m-65,o.ZP.to(t.scale,{x:1.08,y:1.08,duration:.8,yoyo:!0,repeat:-1,ease:"sine.inOut"}),this.playNowButton=t,t}showEndScreen(t,i,e,n){t.visible=!1,i.visible=!1,e.container.visible=!1,n.clear();const a=new s.Text("WORDS OF\nWONDERS",{fill:16777215,fontSize:58,fontWeight:"bold",align:"center",fontFamily:"Sniglet"});return a.anchor.set(.5),a.x=w/2,a.y=140,o.ZP.from(a,{alpha:0,y:a.y-25,duration:.6,ease:"power2.out"}),this.playNowButton&&(this.playNowButton.visible=!0,this.playNowButton.y=m-240,this.playNowButton.scale.set(1.3),o.ZP.from(this.playNowButton,{alpha:0,scale:.9,duration:.35,ease:"power2.out"})),a}}const y=["GOLD","GOD","DOG","LOG"];class f extends s.Container{constructor(){var t;super(),this.eventMode="static",this.words=(t=y,Array.isArray(t)?t:"string"==typeof t?t.split("|").map(t=>t.split(",")[2]).filter(Boolean):[]),this.validWords=new Set(this.words),this.found=new Set,this.isGameOver=!1,this.isAutoplaying=!1,this.ui=new p,this.grid=new r(this),this.tray=new d(this,"G,O,D,L"),this.swipe=new u(this),this.wordPreview=new c(this.tray.trayCenter,this.tray.trayRadius),this.tutorial=new g(this),this.init()}async init(){const t=await this.ui.loadBackground();this.addChildAt(t,0),this.addChild(this.grid.container),this.grid.build(this.words),this.addChild(this.tray.container),this.tray.build(),this.tray.container.addChildAt(this.swipe.line,1),this.addChild(this.wordPreview.container);const i=this.tutorial.buildHand();this.addChild(i);const e=this.grid.getBottomY(),s=this.tutorial.buildHintPanel(e);this.addChild(s);const n=this.ui.createPlayNowButton();this.addChild(n),this.on("pointermove",t=>this.swipe.onMove(t),this),this.on("pointerup",()=>this.swipe.onUp(),this),this.on("pointerupoutside",()=>this.swipe.onUp(),this),this.tutorial.schedule()}startSwipe(t,i=!1){this.swipe.start(t,i)}endGame(){this.isGameOver=!0,this.eventMode="none",this.tutorial.hide(),this.tutorial.cancelAutoplay(),o.ZP.delayedCall(.8,()=>{const t=this.ui.showEndScreen(this.grid.container,this.tray.container,this.wordPreview,this.swipe.line);this.addChild(t)})}}const w=480,m=800,x=new s.Application({backgroundColor:0,antialias:!0,hello:!0,width:w,height:m});x.ticker.stop(),o.p8.ticker.add(()=>{x.ticker.update()}),async function(){document.body.appendChild(x.view),await async function(){await s.Assets.init({manifest:n});const t=await s.Assets.loadBundle(["game","fonts"]),i=n.bundles.map(t=>t.name);return s.Assets.backgroundLoadBundle(i),t.default?t.default:t}(),o.p8.registerPlugin(h.w,l.t),h.w.registerPIXI(s);const t=new s.Sprite(s.Texture.from("assets/bg.png"));t.width=w,t.height=m,t.x=0,t.y=0,x.stage.addChild(t);const i=new f;x.stage.addChild(i)}()},4654:()=>{}},e={};function s(t){var n=e[t];if(void 0!==n)return n.exports;var a=e[t]={id:t,loaded:!1,exports:{}};return i[t].call(a.exports,a,a.exports,s),a.loaded=!0,a.exports}s.m=i,t=[],s.O=(i,e,n,a)=>{if(!e){var o=1/0;for(d=0;d<t.length;d++){for(var[e,n,a]=t[d],h=!0,l=0;l<e.length;l++)(!1&a||o>=a)&&Object.keys(s.O).every(t=>s.O[t](e[l]))?e.splice(l--,1):(h=!1,a<o&&(o=a));if(h){t.splice(d--,1);var r=n();void 0!==r&&(i=r)}}return i}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[e,n,a]},s.d=(t,i)=>{for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={179:0};s.O.j=i=>0===t[i];var i=(i,e)=>{var n,a,[o,h,l]=e,r=0;if(o.some(i=>0!==t[i])){for(n in h)s.o(h,n)&&(s.m[n]=h[n]);if(l)var d=l(s)}for(i&&i(e);r<o.length;r++)a=o[r],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(d)},e=self.webpackChunkplayable_factory=self.webpackChunkplayable_factory||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var n=s.O(void 0,[736],()=>s(4575));n=s.O(n)})();